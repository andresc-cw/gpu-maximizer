<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CoreWeave Tycoon - Datacenter Management Game</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <div id="game-container">
        <!-- Header -->
        <header id="header">
            <div class="header-brand">
                <h1>‚ö° CoreWeave TYCOON</h1>
            </div>
            <div id="sticker-layer">
                <div class="sticker sticker-lfg">#LFG</div>
                <div class="sticker sticker-gpu">#GPU</div>
            </div>
        </header>

        <!-- Active Event Banner -->
        <div id="event-banner" style="display: none;">
            <div class="event-content">
                <span class="event-icon">üöÄ</span>
                <span class="event-name"></span>
                <span class="event-description"></span>
                <span class="event-timer"></span>
            </div>
        </div>

        <!-- Achievement Notifications -->
        <div id="achievement-notifications"></div>

        <!-- Victory Screen -->
        <div id="victory-screen" style="display: none;">
            <div class="victory-content">
                <div class="victory-icon">üéâ</div>
                <h2 class="victory-title">VICTORY!</h2>
                <h3 class="victory-name"></h3>
                <p class="victory-description"></p>
                <p class="victory-message"></p>
                <div class="victory-stats"></div>
                <button class="victory-continue" onclick="closeVictoryScreen()">Continue Playing</button>
            </div>
        </div>

        <!-- Capacity Indicator -->
        <div id="capacity-panel">
            <div class="capacity-bar-container">
                <div class="capacity-labels">
                    <span><strong>üñ•Ô∏è Capacity:</strong></span>
                    <span id="capacity-text">0 Available / 0 Reserved / 0 Total GPUs</span>
                </div>
                <div class="capacity-bar">
                    <div class="capacity-bar-available" id="capacity-bar-available" style="width: 100%"></div>
                    <div class="capacity-bar-reserved" id="capacity-bar-reserved" style="width: 0%"></div>
                </div>
            </div>
        </div>

        <!-- Metrics Panel -->
        <div id="metrics-panel">
            <div class="metric-card">
                <div class="metric-label">
                    Cash
                    <span class="info-icon" data-tooltip="Your available capital. Use it to buy GPUs, upgrade infrastructure, and invest in contracts. Running out? You're burning cash faster than you're earning!">‚ìò</span>
                </div>
                <div class="metric-value" id="cash-display">$0</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">
                    Revenue/Hour
                    <span class="info-icon" data-tooltip="Your earnings rate from completed jobs and active contracts. Real datacenters track this to forecast profitability and make infrastructure investment decisions.">‚ìò</span>
                </div>
                <div class="metric-value" id="revenue-rate">$0</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">
                    GPUs
                    <span class="info-icon" data-tooltip="Total GPU count in your cluster. Modern AI datacenters like CoreWeave scale from hundreds to tens of thousands of GPUs to meet customer demand.">‚ìò</span>
                </div>
                <div class="metric-value" id="gpu-count">0</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">
                    Utilization
                    <span class="info-icon" data-tooltip="Percentage of GPUs actively working on jobs. High utilization (80%+) means you're maximizing revenue. Low utilization means idle hardware burning money. Datacenters obsess over this metric!">‚ìò</span>
                </div>
                <div class="metric-value" id="utilization">0%</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">
                    SLA Compliance
                    <span class="info-icon" data-tooltip="Service Level Agreement: Percentage of jobs started before their deadline. Enterprise customers like Meta demand 99%+ uptime. Miss too many SLAs and you'll lose contracts and revenue!">‚ìò</span>
                </div>
                <div class="metric-value" id="sla-compliance">100%</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">
                    PUE
                    <span class="info-icon" data-tooltip="Power Usage Effectiveness: Ratio of total facility power to IT equipment power. 1.0 = perfect (impossible). 1.2-1.3 = excellent. 1.5+ = room for improvement. Lower PUE = lower electricity bills!">‚ìò</span>
                </div>
                <div class="metric-value" id="pue">1.45</div>
            </div>
        </div>

        <!-- Main Content Area -->
        <div id="main-content">
            <!-- Left: Job Queue -->
            <div id="job-section">
                <h2>Job Queue <span id="queue-count">(0)</span></h2>
                <div id="job-queue"></div>
                
                <h2>Active Jobs <span id="active-count">(0)</span></h2>
                <div id="active-jobs"></div>
            </div>

            <!-- Center: GPU Rack Visualization -->
            <div id="gpu-section">
                <h2>GPU Cluster</h2>
                <div id="cluster-hint" class="tutorial-hint" style="display: none;">
                    üí° <strong>Tip:</strong> Drag a GPU onto another <em>of the same type</em> to create a cluster for multi-GPU jobs!
                </div>
                <div id="utilization-hint" class="tutorial-hint" style="display: none;">
                    üìä <strong>Low Utilization?</strong> Your GPUs are idle! Try investing in <em>Marketing</em> to attract more jobs, or reduce GPU count.
                </div>
                <div id="sla-hint" class="tutorial-hint" style="display: none;">
                    ‚ö†Ô∏è <strong>Missing SLAs?</strong> Jobs are waiting too long! Add more <em>GPUs</em> or create <em>clusters</em> to handle large jobs faster.
                </div>
                <div id="gpu-rack"></div>
                <div id="system-info">
                    <div class="system-info-header">üîß Infrastructure (Auto-Managed)</div>
                    <div class="system-info-item">
                        <strong>Cooling:</strong> <span id="cooling-display">Air</span>
                        <span class="info-icon" data-tooltip="Auto-upgrades when you buy better GPUs. No purchase needed!">‚ìò</span>
                    </div>
                    <div class="system-info-item">
                        <strong>Network:</strong> <span id="network-display">Basic Ethernet (25%)</span>
                        <span class="info-icon" data-tooltip="Auto-improves as your cluster grows. Scales with GPU count!">‚ìò</span>
                    </div>
                    <div class="system-info-item">
                        <strong>Scheduler:</strong> <span id="scheduler-display">FIFO</span>
                        <span class="info-icon" data-tooltip="Auto-unlocks at revenue milestones. Smarter algorithms over time!">‚ìò</span>
                    </div>
                </div>
            </div>

            <!-- Right: Shop -->
            <div id="shop-section">
                <h2>Shop</h2>
                
                <!-- Shop Tabs -->
                <div class="shop-tabs">
                    <button class="shop-tab active" data-tab="gpus">üéÆ GPUs</button>
                    <button class="shop-tab" data-tab="marketing">üìà Marketing</button>
                    <button class="shop-tab" data-tab="contracts">ü§ù Contracts</button>
                </div>
                
                <!-- Shop Content -->
                <div class="shop-content">
                    <div id="shop-tab-gpus" class="shop-tab-content active">
                        <div id="gpu-shop"></div>
                    </div>
                    
                    <div id="shop-tab-marketing" class="shop-tab-content">
                        <div id="marketing-shop"></div>
                    </div>
                    
                    <div id="shop-tab-contracts" class="shop-tab-content">
                        <div id="contracts-shop"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Controls -->
        <div id="controls">
            <div id="speed-controls">
                <button id="pause-btn" class="speed-btn">‚è∏Ô∏è Pause</button>
                <button id="speed-1x" class="speed-btn">1x</button>
                <button id="speed-2x" class="speed-btn">2x</button>
                <button id="speed-5x" class="speed-btn active">5x</button>
                <button id="speed-20x" class="speed-btn" title="Demo mode - 20x speed!">‚ö° 20x</button>
            </div>
            <button id="audio-toggle" class="speed-btn">üîä Audio: ON</button>
            <button id="toggle-auto-assign" class="speed-btn active">ü§ñ Auto: ON</button>
            <button onclick="showWelcomeModal()" class="speed-btn">‚ùì Help</button>
            <button id="reset-btn" class="danger-btn">Reset Game</button>
        </div>

        <!-- Notifications -->
        <div id="notification-container"></div>

        <!-- Welcome/Tutorial Modal -->
        <div id="welcome-modal" class="modal-overlay" style="display: none;">
            <div class="modal-content" style="max-width: 800px;">
                <div class="modal-header">
                    <h2>üéÆ Welcome to GPU Tycoon!</h2>
                    <button class="modal-close" onclick="closeWelcomeModal()">&times;</button>
                </div>
                <div class="modal-body">
                    <div style="margin-bottom: 20px;">
                        <h3 style="color: #0fffff; margin-bottom: 10px;">üéØ Your Mission</h3>
                        <p style="color: #e0e0e0; line-height: 1.6;">
                            You're building a GPU datacenter from scratch! Start with a single NVIDIA L4 GPU and scale up to a massive infrastructure serving AI companies like OpenAI, Meta, and Anthropic.
                        </p>
                    </div>

                    <div style="margin-bottom: 20px;">
                        <h3 style="color: #a855f7; margin-bottom: 10px;">üéì What You'll Learn</h3>
                        <ul style="color: #e0e0e0; line-height: 1.8; padding-left: 20px;">
                            <li><strong>Real GPU Hardware:</strong> L4, A100, H100, GB200 - actual NVIDIA products used in datacenters</li>
                            <li><strong>Power Efficiency (PUE):</strong> Lower = better! Learn why cooling matters for electricity costs</li>
                            <li><strong>Job Scheduling:</strong> Experience how datacenters optimize workload placement</li>
                            <li><strong>Infrastructure Scaling:</strong> See how networking and cooling automatically upgrade as you grow</li>
                            <li><strong>GPU Clustering:</strong> Combine GPUs for large AI training jobs (drag & drop!)</li>
                        </ul>
                    </div>

                    <div style="margin-bottom: 20px;">
                        <h3 style="color: #10b981; margin-bottom: 10px;">üöÄ Quick Start</h3>
                        <ol style="color: #e0e0e0; line-height: 1.8; padding-left: 20px;">
                            <li><strong>Jobs arrive automatically</strong> - complete them to earn money</li>
                            <li><strong>Buy more GPUs</strong> in the shop to handle more jobs</li>
                            <li><strong>Watch your metrics:</strong> Utilization (higher = better), SLA Compliance (don't miss deadlines!)</li>
                            <li><strong>Invest in Marketing</strong> to attract bigger customers</li>
                            <li><strong>Create GPU Clusters</strong> by dragging GPUs onto each other (same type only!)</li>
                        </ol>
                    </div>

                    <div style="background: rgba(15, 255, 255, 0.1); padding: 15px; border-radius: 8px; border-left: 4px solid #0fffff;">
                        <p style="color: #0fffff; margin: 0;">
                            üí° <strong>Pro Tip:</strong> Hover over the <span style="border: 1px solid #0fffff; border-radius: 50%; padding: 2px 6px; font-size: 0.85em;">‚ìò</span> icons throughout the game to learn real datacenter concepts!
                        </p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn-confirm" onclick="closeWelcomeModal()" style="width: 100%;">
                        Let's Build! üèóÔ∏è
                    </button>
                </div>
            </div>
        </div>

        <!-- Educational Modal (for milestones and tips) -->
        <div id="educational-modal" class="modal-overlay" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="edu-modal-title">üí° Did You Know?</h2>
                    <button class="modal-close" onclick="closeEducationalModal()">&times;</button>
                </div>
                <div class="modal-body" id="edu-modal-body">
                    <!-- Content will be dynamically inserted -->
                </div>
                <div class="modal-footer">
                    <button class="btn-confirm" onclick="closeEducationalModal()">Got it!</button>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/js/audio.js"></script>
    <script src="/static/js/education.js"></script>
    <script src="/static/js/clusters.js"></script>
    <script src="/static/js/ui.js"></script>
    <script src="/static/js/game.js"></script>
    <script>
        // Welcome modal functions
        function closeWelcomeModal() {
            document.getElementById('welcome-modal').style.display = 'none';
            localStorage.setItem('gpu_tycoon_welcomed', 'true');
        }

        function closeEducationalModal() {
            document.getElementById('educational-modal').style.display = 'none';
        }

        // Show welcome modal on first visit
        window.addEventListener('DOMContentLoaded', () => {
            const hasSeenWelcome = localStorage.getItem('gpu_tycoon_welcomed');
            if (!hasSeenWelcome) {
                setTimeout(() => {
                    document.getElementById('welcome-modal').style.display = 'flex';
                }, 500);
            }
        });
    </script>
</body>
</html>

